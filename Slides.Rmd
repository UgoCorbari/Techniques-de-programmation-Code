---
title: "Techniques de programmation : Résumé automatisé des rencontres footballistiques"
author: "CORBARI UGO - SCHNEIDER HUGO"
date: "2025-01-14"
output: 
  ioslides_presentation:
    widescreen: true
    smaller: true
    highlight: "monokai"

---

## Sommaire

- **I. Introduction**
  - Présentation du projet et principaux objectifs.
  
- **II. Extraction des données pour un unique match**
  - Récupération et nettoyage des données depuis le site Transfermarkt.
  - Analyse des données principales : équipes, score, spectateurs, date, stade, etc...
  
- **III. Création d'un résumé à partir des données collectées**
  - Structuration des données extraites.
  - Génération d'un résumé narratif détaillé.
  
- **IV. Automatisation du processus et fonction finale**
  - Assemblage des fonctions.
  - Génération automatisée d'un résumé narratif détaillé pour n'importe quel match.


## I. Introduction

### Présentation du projet

- **Contexte :**
  - Projet lié à l'Unité d'enseignements "Techniques de programmation".
  - Développement d’un programme générant des **résumés de matchs de football**.
  - Utilisation des données du site _Transfermarkt_.

- **Objectif principal :**
  - Automatiser la récupération, l’analyse, et la structuration des données pour produire un résumé narratif détaillé.

- **Extraction et analyse des données :**
   - Configuration d'un **User-Agent** pour accéder aux pages ciblées.
   - Nettoyage et structuration descdonnées HTML.
   - Identification des équipes, du score, des buteurs, et des moments clés.

- **Génération du résumé et automatisation :**
   - Produire un résumé narratif automatique pour n’importe quel match.
   - Rendre le processus entièrement automatisé et réutilisable.

## II. Extraction des données pour un unique match

- **Récupération des données d'un match de football depuis le site "Transfermarkt".**
    - "Transfermarkt" est un site web allemand axé sur le football proposant des informations sur les résultats, les transferts ainsi que des statistiques.
    - L'un des 25 sites allemands les plus visités et l'un des principaux sites sportifs.
- **Structure de la page web ciblée.** 
    - Plusieurs encadrés structurant la page web ciblée
    - Encadré 1 : Informations clées telles que la compétition dans laquelle se déroule le match, les équipes impliquées ainsi que le résultat final
    - Encadré 2 : Compositions des équipes
    - Encadré 3 : Données liées aux buts marqués pendant le match, nom du buteur, nom du du passeur décisif, la minute à laquelle chaque but a été inscrit.
    
## Lignes de code.    

Voici les étapes principales pour récupérer et préparer les données web :

```{r eval=FALSE, class.source="code"}

# Étape 1 : Détection du User-Agent
user_agent <- httr::user_agent(
  "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:132.0) Gecko/20100101 Firefox/132.0"
)

# Étape 2 : Définition de l'URL de la page cible
urlpage <- "https://www.transfermarkt.fr/spielbericht/index/spielbericht/4402015"

# Étape 3 : Requête HTTP pour récupérer la page web
foot <- httr::GET(urlpage, user_agent)

# Étape 4 : Lecture et nettoyage du contenu HTML
html <- xml2::read_html(
  httr::content(foot, "text")
)

clean_html <- stringr::str_replace_all(
  as.character(html),
  "[\\t\\r\\n\\f]", ""
)

```

## Principales données de l'encadré 1

```{r eval=FALSE}
page <- read_html(clean_html)

compet <- page %>% html_node(".direct-headline__header") %>%  html_text(trim = TRUE)            # Compétition

T.home <- page %>% html_node(".sb-team.sb-heim .sb-vereinslink") %>% html_text(trim = TRUE)     # Equipe Domicile

T.away <- page %>% html_node(".sb-team.sb-gast .sb-vereinslink") %>% html_text(trim = TRUE)     # Equipe Exterieur

result <- page %>% html_node(".sb-endstand") %>%html_text(trim = TRUE)                          # Résultat

spec <- page %>% html_node(".sb-zusatzinfos strong") %>% html_text(trim = TRUE)                 # Spectateurs

date <- page %>% html_node(".sb-datum.hide-for-small") %>% html_text(trim = TRUE)               # Date du match

Stade <- page %>% html_node(".sb-zusatzinfos a") %>% html_text(trim = TRUE)                     # Nom du stade

# Résumé de ces informations
cat(sprintf("Compétition: %s\nMatch: %s %s %s\nSpectateurs: %s\nDate et heure: %s\nStade: %s\n",
            compet, T.home, result, T.away, spec, date, Stade))
```

    
## III. Création d'un résumé à partir des données collectées

- **Création d'un résumé narratif du match.**

## IV. Automatisation du processus et fonction finale 

- **Restructuration du code en une seule fonction afin d'automatiser le processus.**
- **Objectif final : Obtenir le résumé de n'importe quel match avec des statistiques complètes et pertinentes**

## V. Conclusion du projet

## Retour d'expérience et bilan personnel

